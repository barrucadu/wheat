<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Data.Wheat.Combinators</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Data-Wheat-Combinators.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Data-Wheat-Combinators.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">wheat-0.0.0.0: Yet another binary (de-)serialisation library</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Data.Wheat.Combinators</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Combinators</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A collection of commonly-used combinators to build up larger
 codecs.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:-60-:-62-">(&lt;:&gt;)</a> :: <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d1 e -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d2 e -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> (d1, d2) e</li><li class="src short"><a href="#v:-60--60-:-62--62-">(&lt;&lt;:&gt;&gt;)</a> :: <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Data-Monoid.html#t:Monoid">Monoid</a> d =&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d e -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d e -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d e</li><li class="src short"><a href="#v:-60-:-62--62-">(&lt;:&gt;&gt;)</a> :: <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d1 e -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d2 e -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d2 e</li><li class="src short"><a href="#v:-60--60-:-62-">(&lt;&lt;:&gt;)</a> :: <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d1 e -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d2 e -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d1 e</li><li class="src short"><a href="#v:-60--43--43--62-">(&lt;++&gt;)</a> :: <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d1 e1 -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d2 e2 -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> (d1, d2) (e1, e2)</li><li class="src short"><a href="#v:delimited">delimited</a> :: <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="https://hackage.haskell.org/package/bytestring-0.10.6.0/docs/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="https://hackage.haskell.org/package/bytestring-0.10.6.0/docs/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d e -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d e</li><li class="src short"><a href="#v:dispatch">dispatch</a> :: <a href="Data-Wheat-Types.html#t:Decoder">Decoder</a> d -&gt; (e -&gt; <a href="https://hackage.haskell.org/package/bytestring-0.10.6.0/docs/Data-ByteString-Builder.html#t:Builder">Builder</a>) -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d e</li><li class="src short"><a href="#v:header">header</a> :: (e -&gt; h) -&gt; <a href="Data-Wheat-Types.html#t:Codec">Codec</a> h -&gt; (h -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d e) -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d e</li><li class="src short"><a href="#v:separate">separate</a> :: (e -&gt; (e1, e2)) -&gt; ((d1, d2) -&gt; d) -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d1 e1 -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d2 e2 -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d e</li></ul></div><div id="interface"><h1 id="g:1">Combinators</h1><div class="top"><p class="src"><a name="v:-60-:-62-" class="def">(&lt;:&gt;)</a> :: <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d1 e -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d2 e -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> (d1, d2) e <a href="src/Data-Wheat-Combinators.html#%3C%3A%3E" class="link">Source</a></p><div class="doc"><p>Sequential composition of codecs.</p><p>When encoding, the input value is encoded with both codecs and the
 results are concatenated. When decoding, the remaining bytestring
 from the first codec is used as input to the second.</p></div></div><div class="top"><p class="src"><a name="v:-60--60-:-62--62-" class="def">(&lt;&lt;:&gt;&gt;)</a> :: <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Data-Monoid.html#t:Monoid">Monoid</a> d =&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d e -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d e -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d e <a href="src/Data-Wheat-Combinators.html#%3C%3C%3A%3E%3E" class="link">Source</a></p><div class="doc"><p>Sequential composition of codecs, combining the results of
 decoding monoidally.</p></div></div><div class="top"><p class="src"><a name="v:-60-:-62--62-" class="def">(&lt;:&gt;&gt;)</a> :: <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d1 e -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d2 e -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d2 e <a href="src/Data-Wheat-Combinators.html#%3C%3A%3E%3E" class="link">Source</a></p><div class="doc"><p>Right-biased sequential composition of codecs.</p><p>Encoding behaviour is the same as <code><a href="Data-Wheat-Combinators.html#v:-60-:-62-">&lt;:&gt;</a></code>, decoding throws away the
 result of the first codec.</p></div></div><div class="top"><p class="src"><a name="v:-60--60-:-62-" class="def">(&lt;&lt;:&gt;)</a> :: <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d1 e -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d2 e -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d1 e <a href="src/Data-Wheat-Combinators.html#%3C%3C%3A%3E" class="link">Source</a></p><div class="doc"><p>Left-biased sequential composition of codecs.</p><p>Encoding behaviour is the same as <code><a href="Data-Wheat-Combinators.html#v:-60-:-62-">&lt;:&gt;</a></code>, decoding throws away the
 result of the second codec.</p></div></div><div class="top"><p class="src"><a name="v:-60--43--43--62-" class="def">(&lt;++&gt;)</a> :: <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d1 e1 -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d2 e2 -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> (d1, d2) (e1, e2) <a href="src/Data-Wheat-Combinators.html#%3C%2B%2B%3E" class="link">Source</a></p><div class="doc"><p>Combine two codecs into a codec for tuples of those types, where
 the encoded forms of each element are concatenated.</p></div></div><div class="top"><p class="src"><a name="v:delimited" class="def">delimited</a> :: <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="https://hackage.haskell.org/package/bytestring-0.10.6.0/docs/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.8.0.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="https://hackage.haskell.org/package/bytestring-0.10.6.0/docs/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d e -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d e <a href="src/Data-Wheat-Combinators.html#delimited" class="link">Source</a></p><div class="doc"><p>Surround a codec with delimiters.</p><p>If an ending delimiter is provided, and multiple instances of the
 ending delimiter crop up in the actual ByteString when decoding,
 the wrapped codec will be tried for all possible endings until
 decoding succeeds. If decoding succeeds but does not consume all
 the bytes between the starting and ending tokens, the overall
 decoding will fail.</p></div></div><div class="top"><p class="src"><a name="v:dispatch" class="def">dispatch</a> :: <a href="Data-Wheat-Types.html#t:Decoder">Decoder</a> d -&gt; (e -&gt; <a href="https://hackage.haskell.org/package/bytestring-0.10.6.0/docs/Data-ByteString-Builder.html#t:Builder">Builder</a>) -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d e <a href="src/Data-Wheat-Combinators.html#dispatch" class="link">Source</a></p><div class="doc"><p>Choose an encoder based on the actual value being encoded, with a
 decoder.</p><p>Be careful that this codec actually does express a reversible
 encoding when you have <code>d == e</code>!</p></div></div><div class="top"><p class="src"><a name="v:header" class="def">header</a> :: (e -&gt; h) -&gt; <a href="Data-Wheat-Types.html#t:Codec">Codec</a> h -&gt; (h -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d e) -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d e <a href="src/Data-Wheat-Combinators.html#header" class="link">Source</a></p><div class="doc"><p>Encode a value as a combination of header and encoded value. The
 codec used for encoding/decoding the value itself receives the
 (encoded/decoded) header as a parameter.</p></div></div><div class="top"><p class="src"><a name="v:separate" class="def">separate</a> :: (e -&gt; (e1, e2)) -&gt; ((d1, d2) -&gt; d) -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d1 e1 -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d2 e2 -&gt; <a href="Data-Wheat-Types.html#t:Codec-39-">Codec'</a> d e <a href="src/Data-Wheat-Combinators.html#separate" class="link">Source</a></p><div class="doc"><p>Apply a divide-and-conquer approach: given a function to split up
 the encoding into two smaller components, and a function to combine
 the smaller components after decoding, construct a codec for the
 more complex type.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.0</p></div></body></html>